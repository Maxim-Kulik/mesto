!function(){"use strict";const e=document.querySelector(".popup_edit"),t=document.querySelector(".popup_add-cards"),s=document.querySelector(".edit-button"),r=(document.querySelector(".close-button_edit-form"),document.querySelector(".profile__name")),n=document.querySelector(".profile__status"),o=document.querySelector(".form__input_input-name_name"),i=document.querySelector(".form__input_input-name_status"),l=(document.querySelector(".form__profile_edit"),document.querySelector(".add-button")),c=(document.querySelector(".close-button_add-cards"),document.querySelector(".form__profile_add-cards")),a=(document.querySelector(".close-button_image-cards"),c.querySelector(".form__input_input-card-name_name")),u=c.querySelector(".form__input_input-card-name_img"),_=document.querySelector(".elements"),p=document.querySelector(".popup-content-wrapper__image"),d=document.querySelector(".popup-content-wrapper__title");document.querySelector(".popup_image-cards");class m{constructor(e){this._popupSelector=document.querySelector(e),this._handleEscClose=this._handleEscClose.bind(this)}setEventListeners(){this._popupSelector.querySelector(".close-button").addEventListener("click",(()=>{this.close()})),document.querySelectorAll(".popup").forEach((e=>{e.addEventListener("click",(e=>{e.target.classList.contains("popup_open")&&this.close()}))}))}_handleEscClose(e){"Escape"===e.key&&this.close()}open(){this._popupSelector.classList.add("popup_open"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupSelector.classList.remove("popup_open"),document.removeEventListener("keydown",this._handleEscClose)}}class h{constructor(e,t,s,r){this._name=e,this._link=t,this._cardSelector=r,this._handleCardClick=s}createCard(){this._element=this._getTemplateElement();const e=this._element.querySelector(".element__image"),t=this._element.querySelector(".element__title");return e.src=this._link,e.alt=this._name,t.textContent=this._name,this._setEventListeners(),this._element}_setEventListeners(){this._addLikeButtonFunction(),this._addTrashButtonFunction(),this._element.querySelector(".element__image").addEventListener("click",(()=>{this._handleCardClick({link:this._link,name:this._name})}))}_getTemplateElement(){return document.querySelector(this._cardSelector).content.cloneNode(!0)}_addLikeButtonFunction(){const e=this._element.querySelector(".group");e.addEventListener("click",(function(){e.classList.toggle("group_active")}))}_addTrashButtonFunction(){this._element.querySelector(".trash-button").addEventListener("click",(function(e){e.target.closest(".element").remove()}))}}class v{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setInputListeners(this._form)}_setInputListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInput(e),this._toggleButtonState()})),this._toggleButtonState()}))}_checkInput(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_hideInputError(e){this._errorElement=this._form.querySelector("#".concat(e.id,"-error")),e.classList.remove(this._inputErrorClass),this._errorElement.classList.remove(this._errorClass)}_showInputError(e){this._errorElement=this._form.querySelector("#".concat(e.id,"-error")),e.classList.add(this._inputErrorClass),this._errorElement.classList.add(this._errorClass),this._errorElement.textContent=e.validationMessage}_toggleButtonState(){this._hasInvalidInput(this._inputList)||this._allInputsEmpty(this._inputList)?this.inctiveButton():this.activeButton()}_hasInvalidInput(){return this._inputList.some((e=>!e.validity.valid))}_allInputsEmpty(){return!this._inputList.some((e=>e.value.length>0))}activeButton(){this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled")}inctiveButton(){this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}clearErrorElements(){Array.from(this._form.querySelectorAll(".form__error")).forEach((e=>{e.classList.remove(this._errorClass)})),Array.from(this._form.querySelectorAll(".form__input")).forEach((e=>{e.classList.remove(this._inputErrorClass)}))}}class E extends m{constructor(e,t){super(e),this._submitCallback=t}setEventListeners(){this._popupSelector.querySelector(".form__profile").addEventListener("submit",(e=>{e.preventDefault(),this._submitCallback(this._getInputValues())})),super.setEventListeners()}_getInputValues(){return this._inputList=Array.from(this._popupSelector.querySelectorAll(".form__input")),this._inputValue={},this._inputList.forEach((e=>{this._inputValue[e.name]=e.value})),this._inputValue}close(){super.close()}}const f={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_invalid",inputErrorClass:"form__input_type_error",errorClass:"form__error_visible"};function y(e,t){return new h(e,t,(e=>{let{link:t,name:s}=e;C.open({link:t,name:s})}),".template")}const S=new class{constructor(e,t){this._selectorName=document.querySelector(e),this._selectorStatus=document.querySelector(t)}getUserInfo(){return this._userInfo={},this._userInfo.name=this._selectorName.textContent,this._userInfo.status=this._selectorStatus.textContent,this._userInfo}setUserInfo(e,t){this._selectorName.textContent=e,this._selectorStatus.textContent=t}}(".profile__name",".profile__status"),L=new E(".popup_edit",(e=>{S.setUserInfo(e.name,e.status),L.close()}));L.setEventListeners(),s.addEventListener("click",(()=>{o.value=r.textContent,i.value=n.textContent,b.activeButton(),b.clearErrorElements(),L.open()}));const k=new E(".popup_add-cards",(e=>{const t=y(e.place,e.link).createCard();_.prepend(t),k.close()}));k.setEventListeners(),l.addEventListener("click",(()=>{a.value="",u.value="",g.inctiveButton(),g.clearErrorElements(),k.open()}));const C=new class extends m{constructor(e){super(e)}open(e){let{link:t,name:s}=e;d.textContent=s,p.src=t,p.alt=s,super.open()}close(){super.close()}}(".popup_image-cards"),q=new class{constructor(e,t){let{items:s,renderer:r}=e;this._renderedItems=s,this._renderer=r,this._container=document.querySelector(t)}addItem(e){this._container.append(e)}renderItems(){this._renderedItems.forEach((e=>{this._renderer(e)}))}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:e=>{const t=y(e.name,e.link).createCard();q.addItem(t),C.close()}},".elements");q.renderItems(),C.setEventListeners();const b=new v(f,e);b.enableValidation();const g=new v(f,t);g.enableValidation()}();